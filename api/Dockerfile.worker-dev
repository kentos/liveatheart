FROM alpine AS base

RUN apk add --update nodejs npm
RUN addgroup -S nodeusers && adduser -S node -G nodeusers
WORKDIR /app

FROM base
USER node
ENV NODE_ENV=development
VOLUME [ "/app" ]
ENTRYPOINT [ "./node_modules/.bin/nodemon" ]
CMD [ "--files", "--transpile-only", "./src/worker/worker.ts" ]
